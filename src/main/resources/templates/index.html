<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="https://unpkg.com/htmx.org@1.9.5"
            integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO"
            crossorigin="anonymous"></script>

    <th:block th:replace="~{archive_ui.html :: header}"></th:block>

    <style type="text/css">
        .header {
            font-family: Roboto, Arial, sans-serif;
            line-height: 1.25rem;
            font-size: .875rem;
            letter-spacing: .0178571429em;
            font-weight: 500;
            color: rgb(60, 64, 67);
        }

        .img {
            padding: 2px;
            background-color: #eeeeee;
            position: relative;
            display: inline-block;
        }

        .img:hover:after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 80px;
            background: rgb(2,0,36);
            background: linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0) 100%);
        }

        .location {
            font-family: Roboto, Arial, sans-serif;
            line-height: 1.25rem;
            font-size: .875rem;
            letter-spacing: .0142857143em;
            font-weight: 400;
            color: rgb(128, 134, 139);
            cursor: pointer;
            margin-left: 6px;
            padding: 16px 0 16px 6px;
            outline: none;
        }
    </style>


</head>
<body>

<div th:insert="~{archive_ui.html :: archive_ui}"></div>

<div th:each="entry, dateStatus: ${images.entrySet()}" th:remove="tag">
    <h2 class="header" th:if="${param.date == null || (!#temporals.format(entry.key,'yyyyMMdd').equals(param.date[0].substring(0, 8)))}"><span th:text="${#temporals.format(entry.key,'EEE, dd MMM yyyy')}">[Date]</span><span
            class="location"
            th:text="${T(com.jetbrains.marcocodes.googlephotosclone.Media).locationsToString(entry.value)}">Location</span>
    </h2>
    <div th:each="image, status: ${entry.value}" class="img" th:attrappend="hx-trigger=${dateStatus.last && status.last}?'revealed',hx-swap=${dateStatus.last && status.last}?'afterend',hx-get=${dateStatus.last && status.last}?${'/?date=' + #temporals.format(image.creationDate, 'yyyyMMddHHmmss') + '&id='+ image.id}">
    <img
         th:title="${'Longitude: ' + image.longitude + ' | Latitude: ' + image.latitude + ' | Location: ' + image.location}"
         th:src="${'/a/' + image.hash}">
    </div>
</div>

</body>
</html>